{% extends 'base.html' %}
{% block head %}
<title>Job Search Website</title>
<link rel="stylesheet" href="/static/CSS/Jobprofile.css">
{% endblock %}


{% block body %}
    <nav>
        <ul>
            <li><a href="#">Work Location</a></li>
            <li><a href="#">Internship</a></li>
            <li><a href="#">Membership</a></li>
            <li><a href="#">About Us</a></li>
            <li><a href="#">FAQs</a></li>
            <li><a href="/profile/">Profile</a></li>
            <li><a href="#"><i class="fas fa-cog"></i></a></li>
            <li><a href="#"><i class="fas fa-bell"></i></a></li>
        </ul>
    </nav>

    <!-- <hr class="hr-line"> -->
     
    <div class="search-bar">
        <div class="location-input">
            <i class="fas fa-map-marker-alt"></i>
            <input type="text" placeholder="Work Location">
        </div>
        <input type="text" placeholder="Search for jobs...">
        <button>Search</button>
    </div>
    <div class="container">
        <aside>
            <h2>Filters</h2>
            <div class="filter-group">
                <label><input type="checkbox"> Full-time</label>
                <label><input type="checkbox"> Part-time</label>
            </div>
            <div class="filter-group">
                <label><input type="checkbox"> Full-time</label>
                <label><input type="checkbox"> Part-time</label>
            </div>
            <div class="filter-group">
                <label><input type="checkbox"> Full-time</label>
                <label><input type="checkbox"> Part-time</label>
            </div>
            <div class="filter-group">
                <label><input type="checkbox"> Full-time</label>
                <label><input type="checkbox"> Part-time</label>
            </div>
            <div class="filter-group">
                <label><input type="checkbox"> Full-time</label>
                <label><input type="checkbox"> Part-time</label>
            </div>
        </aside>

        <main class="main-content">
            <div class="job-filters">
                <h2>Recommended Jobs <span class="job-count">289</span></h2>
            </div>
            <div class="job-grid">
                <div class="job-card blue">
                    <div class="job-card-header">
                        <span>23 Sep,2024</span>
                        <span>+</span>
                    </div>
                    <div class="company-logo"></div>
                    <div class="job-title">Senior Python Developer</div>
                    <div class="job-company">Google</div>
                    <div class="job-description">description.........................</div>
                    <button class="apply-btn">Apply</button>
                </div>
                <div class="job-card red">
                    <div class="job-card-header">
                        <span>23 Sep,2024</span>
                        <span>+</span>
                    </div>
                    <div class="company-logo"></div>
                    <div class="job-title">Senior Python Developer</div>
                    <div class="job-company">Google</div>
                    <div class="job-description">description.........................</div>
                    <button class="apply-btn">Apply</button>
                </div>

            
            <div class="job-card green">
                <div class="job-card-header">
                    <span>23 Sep,2024</span>
                    <span>+</span>
                </div>
                <div class="company-logo"></div>
                <div class="job-title">Senior Python Developer</div>
                <div class="job-company">Google</div>
                <div class="job-description">description.........................</div>
                <button class="apply-btn">Apply</button>
            </div>

            <div class="job-card antiquewhite">
                <div class="job-card-header">
                    <span>23 Sep,2024</span>
                    <span>+</span>
                </div>
                <div class="company-logo"></div>
                <div class="job-title">Senior Python Developer</div>
                <div class="job-company">Google</div>
                <div class="job-description">description.........................</div>
                <button class="apply-btn">Apply</button>
            </div>


            <div class="job-card aquamarine">
                <div class="job-card-header">
                    <span>23 Sep,2024</span>
                    <span>+</span>
                </div>
                <div class="company-logo"></div>
                <div class="job-title">Senior Python Developer</div>
                <div class="job-company">Google</div>
                <div class="job-description">description.........................</div>
                <button class="apply-btn">Apply</button>
            </div>



            <div class="job-card green">
                <div class="job-card-header">
                    <span>23 Sep,2024</span>
                    <span>+</span>
                </div>
                <div class="company-logo"></div>
                <div class="job-title">Senior Python Developer</div>
                <div class="job-company">Google</div>
                <div class="job-description">description.........................</div>
                <button class="apply-btn">Apply</button>
            </div>


            


        </div>
                <!-- Add more job cards as needed -->
            </div>
        </main>
        <script>
            
        // Apply button pop-up and color change
        const applyButtons = document.querySelectorAll('.apply-btn');
        applyButtons.forEach(button => {
            button.addEventListener('click', () => {
                alert('You have applied for this job!');
                button.style.backgroundColor = 'green'; // Change apply button color to green
                button.style.color = 'white'; // Ensure text color is visible
                button.textContent = 'Applied'; // Change text to indicate applied
                button.disabled = true; // Disable button after applying
            });
        });

        // Bookmark 
        const bookmarkSpans = document.querySelectorAll('.bookmark-icon');
        bookmarkSpans.forEach(span => {
            const jobCard = span.closest('.job-card');
            const jobId = jobCard.dataset.jobId;

            // Load existing bookmarks and update color if already bookmarked
            let bookmarkedJobs = JSON.parse(localStorage.getItem('bookmarkedJobs')) || [];
            const isBookmarked = bookmarkedJobs.some(job => job.id === jobId);
            if (isBookmarked) {
                span.style.color = 'black'; // Set to black if already bookmarked
            }

            
            span.addEventListener('click', (event) => {
                toggleBookmark(jobCard, span); 
            });
        });

        // bookmark (add/remove) and update color
        function toggleBookmark(jobCard, span) {
            const jobId = jobCard.dataset.jobId;
            const jobTitle = jobCard.querySelector('.job-title').textContent;
            const jobCompany = jobCard.querySelector('.job-company').textContent;

            let bookmarkedJobs = JSON.parse(localStorage.getItem('bookmarkedJobs')) || [];
            const isBookmarked = bookmarkedJobs.some(job => job.id === jobId);

            if (isBookmarked) {
                // Remove from bookmarks
                bookmarkedJobs = bookmarkedJobs.filter(job => job.id !== jobId);
                localStorage.setItem('bookmarkedJobs', JSON.stringify(bookmarkedJobs));
                span.style.color = 'grey'; // Change color back to grey
                alert('Job removed from bookmarks!');
            } else {
                // Add to bookmarks
                bookmarkedJobs.push({ id: jobId, title: jobTitle, company: jobCompany });
                localStorage.setItem('bookmarkedJobs', JSON.stringify(bookmarkedJobs));
                span.style.color = 'black'; // Change color to black
                alert('Job bookmarked successfully!');
            }
        }
        </script>
        
    </div>
{% endblock %}

